@model Ministry.BlogPage.Entities.News

@{
    ViewData["Title"] = "AddNews";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
<link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
@*<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>*@
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.7.1/summernote.min.css" integrity="sha512-wVxE8x9gtMRxMbyxSWQMTNc26R/wzASfbEWwdb6vUQra+X1M6mxZSa+PJwydxLFAIKELXFqadqQ17tuDfQ1b+w==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.7.1/summernote.min.js" integrity="sha512-WOFZgYO1LV/SQQiAHQ5LD7ypuUnMVBFRtHQI5LOF7VPaNLOVBA9ta+prus/sKA/eH+omsAN2KQG7/wLP7aJcBg==" crossorigin="anonymous"></script>

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1>Əlavə et</h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Blank Page</li>
                    </ol>
                </div>
            </div>
        </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">

        <!-- Default box -->
        <!-- /.card -->

        <form action="/Admin/Manager/AddNews" method="post" enctype="multipart/form-data">
            <div class="card-body">
                <div class="form-group">
                    <label for="exampleInputEmail1">Xəbər Başlığı</label>
                    <input type="text" name="title" class="form-control" id="exampleInputEmail1" placeholder="Xəbər Başlığı">
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">Qisa Kontent</label>
                    <span style="color:red">@(ViewBag.Error != null ? ViewBag.Error : "")</span>
                    <input required type="text" name="shortDesc" class="form-control" id="exampleInputEmail1" placeholder="Qisa Kontent">
                </div>
                <button onclick="handleClickFileUpload()" type="button" class="btn btn-outline-secondary"><i class="fas fa-upload"></i> Əsas şəkil yüklə</button>

                <input type="file" id="file" hidden name="file" />
                <br />
                <br />
                <textarea id="summernote" name="editordata"></textarea>

            </div>
            <!-- /.card-body -->

            <div class="card-footer">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>


    </section>
    <!-- /.content -->
</div>
<script>
    $(document).ready(function () {
        const smnote = $('#summernote')
        smnote.summernote({
            height: 500,
            callbacks: {
                onImageUpload: function (files) {
                    data = new FormData();
                    data.append("file", files[0]);
                    $.ajax({
                        data: data,
                        type: "POST",
                        url: "/Admin/Manager/UploadImageFromEditor",
                        cache: false,
                        contentType: false,
                        processData: false,
                        success: function (url) {
                            console.log(smnote)
                            console.log(smnote.summernote())
                            //editor.insertImage(welEditable, url);
                            //$('#summernote').summernote('insertImage', url,"shekil");
                            smnote.summernote('editor.insertImage', url);

                        }
                    });

                }
            }
        });
    });
    function handleClickFileUpload() {
        document.getElementById("file").click();
    }
</script>